# KanoPLayer
# 基于ffmpeg+SDL的QWidget多媒体播放器
一个多媒体播放器，支持网络流和本地文件在线播放,实现播放暂停、倍速、跳转、播放列表等功能。主界面基于无窗口Qt Widget，包含标题栏、播放列表、多媒体、播放控制等组件，实现较好的逻辑交互功能。
媒体文件解码基于ffmpeg，其中视频渲染利用OpenGLWidget，音频播放用SDL2进行控制。

## 项目架构:Qt+ffmpeg+SDL2+OpenGL

## 功能描述：
1.使用Qt事件循环处理界面交互逻辑，信号和槽解耦各个模块，QSS进行界面美化，使用无ui纯代码进行界面布局。

2.使用ffmpeg对媒体文件分流，多线程处理视频流、音频流解码，利用队列进行流数据缓存。

3.音视频同步基于音频时钟，调用SDL库回调音频帧进行音频输出，利用Qt封装的OpenGLWidget进行视频帧渲染。

4.音视频倍速:本播放器提供较低的倍速控制(0.5-2倍)，因此视频帧仅仅通过缩短或增加pts进行实现(如果想更高倍速播放，可以研究抽帧，解码只处理关键帧等手段);
音频帧倍速通过音频重采样进行实现(仅采用重采样会导致音调发生变化，后续预估将利用SoundTouch进行音频变调处理，由于底层原理理解并非很透彻，有时间再来弄吧！！！0.0)。

5.播放器列表使用QListView和QStringListModel，利用QSettings将播放列表存入注册表，这样如果不主动删除下一次打开程序时你的列表文件依旧存在,(请注意如果路径被修改和删除带来的影响)。

## 复现须知
1.Qt版本我采用的是6.2.0，当然你也可以使用Qt5。

2.ffmpeg和SDL2的lib、dll、include已经一起打包了，不需要去官网重新下载，请注意将dll文件拷贝到运行目录(或者弄个bin文件添加至环境变量)。

3.完成一个项目的搭建并不容易，部分代码也是参考了网上一些杂七杂八的程序，开源仅供学习，仅供学习！！！(欢迎前来沟通，互相交流学习！个人博客：https://www.cnblogs.com/fly777/)

## 更新日志
1.2023年11月8日KanoPlayer1.0正式上线，已经完成一个播放器大致的功能，后续计划:(1).将SoundTouch引入解决音频变调问题。(2).慢慢去优化大大小小的bug，可能影响体验，但就这样吧(懒得改了)！(3).花里胡哨的界面美化，QSS的功能其实很强大，像什么圆角主窗口、窗口阴影、move动画等等！(4).多线程那一套用的是基于C++标准的线程池实现，有时间重构为QThreadPool 

## 界面展示
![XQD(2WK$3TEBJLOT)7{R~GT](https://github.com/Kano0660/KanoPLayer/assets/74139876/5985a67e-3766-4c3a-bee3-f894c3f2b921)


